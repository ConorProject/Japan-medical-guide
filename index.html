<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Medical Guide - Medications, Import Rules & Pharmacy Guide</title>
    <meta name="description" content="Complete guide to bringing medications to Japan. Check import restrictions, find pharmacy products, and navigate customs regulations. Updated 2025.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 18px;
            line-height: 1.7;
            font-weight: 400;
            letter-spacing: 0.01em;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 600;
            line-height: 1.1;
            letter-spacing: -0.02em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3rem;
            font-weight: 400;
            line-height: 1.4;
            letter-spacing: 0.005em;
            opacity: 0.9;
        }

        /* ============================================================================
           SIMPLIFIED MEDICAL GUIDE CSS - CLEAN PROFESSIONAL DESIGN
           Replaces complex CSS with simplified version, keeps enhanced display functionality
           ============================================================================ */

        /* Handy Guide on Top, Encyclopedia Underneath - SIMPLIFIED VERSION */
        .handy-guide {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 17px;
            line-height: 1.6;
        }

        .handy-guide h3 {
            color: #343a40;
            font-size: 22px;
            font-weight: 600;
            margin: 0 0 16px 0;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 8px;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .guide-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .medication-title {
            flex: 1;
            min-width: 200px;
        }

        .medication-name {
            font-size: 1.5rem;
            font-weight: 600;
            color: #343a40;
            margin: 0 0 5px 0;
            line-height: 1.2;
        }

        .medication-generic {
            font-size: 1rem;
            color: #6c757d;
            margin-bottom: 3px;
            font-style: italic;
        }

        .medication-used-for {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
        }

        /* Status Badges - SIMPLIFIED */
        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 12px;
            text-align: center;
            min-width: 120px;
        }

        .status-badge.prohibited {
            background: #dc3545;
            color: white;
        }

        .status-badge.permit-required {
            background: #fd7e14;
            color: white;
        }

        .status-badge.controlled-allowed {
            background: #ffc107;
            color: #333;
        }

        .status-badge.allowed {
            background: #28a745;
            color: white;
        }

        /* Medication Cards - CLEAN */
        .medication-card.status-prohibited {
            border-left: 4px solid #dc3545;
        }

        .medication-card.status-permit-required {
            border-left: 4px solid #fd7e14;
        }

        .medication-card.status-controlled-allowed {
            border-left: 4px solid #ffc107;
        }

        .medication-card.status-allowed {
            border-left: 4px solid #28a745;
        }

        /* Story Hook - SIMPLIFIED */
        .story-hook {
            background: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .hook-icon {
            font-size: 1.1rem;
            margin-bottom: 5px;
            display: block;
        }

        .hook-text {
            font-size: 0.95rem;
            line-height: 1.5;
            color: #1565c0;
            font-weight: 500;
            margin: 0;
        }

        /* Critical Action - SIMPLIFIED */
        .critical-action {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-left: 3px solid #1976d2;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 15px;
        }

        .action-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1976d2;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .action-steps {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .step-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e9ecef;
        }

        .step-number {
            background: #1976d2;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .step-content {
            font-size: 0.95rem;
            line-height: 1.4;
            color: #495057;
            font-weight: 500;
        }

        /* Quick Facts - SIMPLIFIED */
        .quick-facts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .fact-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #e9ecef;
            border-left: 3px solid #1976d2;
        }

        .fact-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .fact-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: #343a40;
            line-height: 1.2;
        }

        /* Critical Warning - SIMPLIFIED */
        .critical-warning {
            background: #fff5f5;
            border: 1px solid #fecaca;
            border-left: 3px solid #dc3545;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .warning-title {
            font-size: 1rem;
            font-weight: 600;
            color: #dc3545;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .warning-text {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #721c24;
            font-weight: 500;
            margin: 0;
        }

        /* Encyclopedia Toggle Button - SIMPLIFIED */
        .encyclopedia-toggle {
            width: 100%;
            padding: 12px 20px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .encyclopedia-toggle:hover {
            background: #1565c0;
        }

        /* Encyclopedia Section - SIMPLIFIED */
        .encyclopedia {
            display: none;
            padding: 0 20px 20px 20px;
            border-top: 1px solid #e0e0e0;
            background: #fafafa;
        }

        .encyclopedia.expanded {
            display: block;
        }

        .encyclopedia-header {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1565c0;
            margin-bottom: 20px;
            padding-top: 20px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 12px;
        }

        /* Chart Sections - SIMPLIFIED */
        .chart-section, .unique-story-section, .cultural-context-section, .research-quality {
            background: white;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
        }

        .chart-section h4, .unique-story-section h4, .cultural-context-section h4, .research-quality h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1565c0;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .chart-grid, .quality-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .chart-item, .quality-item {
            background: #f8f9fa;
            padding: 10px 12px;
            border-radius: 4px;
            border: 1px solid #e9ecef;
            border-left: 3px solid #1976d2;
        }

        .chart-label, .quality-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .chart-value, .quality-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: #343a40;
            line-height: 1.2;
        }

        /* Commentary Section - SIMPLIFIED */
        .commentary-section {
            margin-bottom: 20px;
        }

        .commentary-header {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            margin-bottom: 15px;
            text-align: center;
            padding: 12px;
            background: #1976d2;
            border-radius: 6px;
        }

        .commentary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .commentary-item {
            background: white;
            border-radius: 6px;
            padding: 16px;
            border: 1px solid #e0e0e0;
            border-left: 3px solid #1976d2;
        }

        .commentary-item h5 {
            font-size: 1rem;
            font-weight: 600;
            color: #1565c0;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .commentary-item p {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #495057;
            margin: 0;
        }

        /* Rest of existing styles remain the same */
        .nav-tabs {
            display: flex;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px 20px 0 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 0;
        }

        .nav-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 0.02em;
            transition: all 0.3s ease;
            color: #666;
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .nav-tab:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
        }

        .tab-content {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 0 0 20px 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        .search-section {
            margin-bottom: 30px;
        }

        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 50px;
            font-size: 17px;
            font-weight: 400;
            letter-spacing: 0.01em;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-btn {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 0.02em;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .category-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .category-btn {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.02em;
            transition: all 0.3s ease;
        }

        .category-btn:hover,
        .category-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .product-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease-out;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .product-name {
            font-size: 1.4rem;
            font-weight: 600;
            line-height: 1.3;
            letter-spacing: -0.01em;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .product-japanese {
            font-size: 1.1rem;
            font-weight: 400;
            line-height: 1.4;
            color: #7f8c8d;
            font-weight: 500;
        }

        .product-category {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .product-description {
            font-size: 16px;
            line-height: 1.6;
            letter-spacing: 0.01em;
            color: #555;
            margin-bottom: 15px;
        }

        .product-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .detail-label {
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 0.02em;
            color: #2c3e50;
            font-size: 0.9rem;
        }

        .detail-value {
            font-weight: 400;
            font-size: 15px;
            line-height: 1.5;
            color: #555;
            font-size: 0.95rem;
        }

        .equivalent-info {
            background: linear-gradient(135deg, #e8f4fd, #f0f8ff);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid #b3d9ff;
        }

        .equivalent-info h4 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1rem;
            font-weight: 600;
        }

        .equivalent-list {
            list-style: none;
            padding: 0;
        }

        .equivalent-list li {
            font-size: 15px;
            line-height: 1.6;
            letter-spacing: 0.005em;
            color: #555;
            margin-bottom: 5px;
            padding-left: 28px;
            position: relative;
        }

        .equivalent-list li::before {
            content: "üîÑ";
            position: absolute;
            left: 0;
            width: 20px;
        }

        .usage-tips {
            background: linear-gradient(135deg, #e8f5e8, #f0f8ff);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 1px solid #d4edda;
        }

        .usage-tips h4 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1rem;
            font-weight: 600;
        }

        .tip-list {
            list-style: none;
            padding: 0;
        }

        .tip-list li {
            font-size: 15px;
            line-height: 1.6;
            letter-spacing: 0.005em;
            color: #555;
            margin-bottom: 5px;
            padding-left: 28px;
            position: relative;
        }

        .tip-list li::before {
            content: "üí°";
            position: absolute;
            left: 0;
            width: 20px;
        }

        .no-results {
            text-align: center;
            color: #666;
            font-size: 1.2rem;
            margin-top: 50px;
            padding: 40px;
            background: rgba(255,255,255,0.9);
            border-radius: 20px;
        }

        .hidden {
            display: none !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
                line-height: 1.6;
            }
            
            .header h1 {
                font-size: 2.2rem;
                letter-spacing: -0.015em;
            }
            
            .header p {
                font-size: 1.1rem;
            }
            
            .product-name {
                font-size: 1.25rem;
            }
            
            .search-input {
                font-size: 16px;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .product-details {
                grid-template-columns: 1fr;
            }

            .handy-guide {
                padding: 16px;
                font-size: 16px;
            }

            .medication-name {
                font-size: 1.3rem;
            }

            .guide-header {
                flex-direction: column;
                align-items: stretch;
            }

            .status-badge {
                align-self: flex-start;
                min-width: auto;
                width: 100%;
            }

            .quick-facts {
                grid-template-columns: 1fr;
            }

            .chart-grid, .quality-grid {
                grid-template-columns: 1fr;
            }

            .commentary-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animation - SIMPLIFIED */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Japan Medical Guide</h1>
            <p>Your complete guide to Japanese pharmacies, medications & regulations</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="products">üõí Find Products</button>
            <button class="nav-tab" data-tab="equivalents">üîÑ Drug Equivalents</button>
            <button class="nav-tab" data-tab="symptoms">ü©∫ Symptom Search</button>
            <button class="nav-tab" data-tab="regulations">‚ö†Ô∏è Import Rules</button>
        </div>

        <!-- Products Tab -->
        <div class="tab-content" id="products-tab">
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search for products, brands, or Japanese names..." id="searchInput">
                </div>
                
                <div class="category-filter" id="categoryFilter">
                    <button class="category-btn active" data-category="all">All Products</button>
                    <button class="category-btn" data-category="skincare">Skincare</button>
                    <button class="category-btn" data-category="medicine">Medicine</button>
                    <button class="category-btn" data-category="beauty">Beauty</button>
                    <button class="category-btn" data-category="supplements">Supplements</button>
                    <button class="category-btn" data-category="hygiene">Hygiene</button>
                </div>
            </div>

            <div class="products-grid" id="productsGrid"></div>
            <div class="no-results" id="noResults" style="display: none;">
                No products found matching your search criteria.
            </div>
        </div>

        <!-- Equivalents Tab -->
        <div class="tab-content hidden" id="equivalents-tab">
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Enter drug name (e.g., Tylenol, Advil, Benadryl)..." id="equivalentSearch">
                    <button class="search-btn" onclick="searchEquivalents()">Find Japanese Equivalent</button>
                </div>
            </div>
            <div class="products-grid" id="equivalentsGrid"></div>
            <div class="no-results" id="noEquivalents" style="display: none;">
                No Japanese equivalents found. Try searching by active ingredient or generic name.
            </div>
        </div>

        <!-- Symptoms Tab -->
        <div class="tab-content hidden" id="symptoms-tab">
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Describe your symptoms (e.g., headache, sore throat, stomach pain)..." id="symptomSearch">
                    <button class="search-btn" onclick="searchSymptoms()">Find Treatments</button>
                </div>
            </div>
            <div class="products-grid" id="symptomsGrid"></div>
            <div class="no-results" id="noSymptoms" style="display: none;">
                No treatments found for those symptoms. Try different keywords or consult a pharmacist.
            </div>
        </div>

        <!-- Regulations Tab -->
        <div class="tab-content hidden" id="regulations-tab">
            <!-- Import Status Checker -->
            <div style="background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; padding: 30px; margin-bottom: 30px; color: white;">
                <h2 style="margin: 0 0 10px 0; font-size: 2rem;">üîç Check Your Medication Import Status</h2>
                <p style="margin: 0 0 20px 0; opacity: 0.9;">Instant answers: Is your medication allowed, prohibited, or does it require a permit?</p>
                
                <div class="search-bar">
                    <input type="text" 
                           class="search-input" 
                           placeholder="Enter medication name (e.g., Adderall, Vyvanse, Tylenol, Birth Control)..." 
                           id="restrictionSearch"
                           style="background: white; color: #333;">
                    <button class="search-btn" onclick="searchImportRestrictions()" style="background: white; color: #667eea;">
                        Check Status
                    </button>
                </div>
            </div>

            <!-- Search Results Area -->
            <div id="restrictionsGrid"></div>
            <div class="no-results" id="noRestrictions" style="display: none;">
                No medication found. Try searching by generic name or active ingredient.
            </div>

            <!-- Timeline Clarification -->
            <div style="background: linear-gradient(135deg, #e8f4fd, #f0f8ff); border: 2px solid #4a90e2; border-radius: 15px; padding: 25px; margin: 30px 0;">
                <h3 style="color: #2c3e50; margin: 0 0 20px 0; font-size: 1.6rem;">
                    üìÖ Application Timeline - START EARLY!
                </h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #dc3545;">
                        <h4 style="color: #dc3545; margin: 0 0 10px 0;">‚è∞ Recommended Timeline</h4>
                        <p style="margin: 0; font-size: 1.1rem; font-weight: 600;">Start 4-6 weeks before travel</p>
                        <p style="margin: 10px 0 0 0; color: #666;">This allows time for questions, corrections, and processing delays</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #ffc107;">
                        <h4 style="color: #856404; margin: 0 0 10px 0;">‚ö†Ô∏è Absolute Minimum</h4>
                        <p style="margin: 0; font-size: 1.1rem; font-weight: 600;">14 days before travel</p>
                        <p style="margin: 10px 0 0 0; color: #666;">Risk of denial if any issues arise - NOT recommended</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #28a745;">
                        <h4 style="color: #28a745; margin: 0 0 10px 0;">‚úÖ Processing Time</h4>
                        <p style="margin: 0; font-size: 1.1rem; font-weight: 600;">2-4 weeks typical</p>
                        <p style="margin: 10px 0 0 0; color: #666;">Varies by medication type and completeness of application</p>
                    </div>
                </div>
            </div>

            <!-- Customs Declaration Guide -->
            <div style="background: linear-gradient(135deg, #e3f2fd, #e8f5e9); border: 2px solid #2196f3; border-radius: 15px; padding: 30px; margin: 30px 0;">
                <h3 style="color: #1976d2; margin: 0 0 25px 0; font-size: 1.8rem;">
                    üìù Customs Declaration Form - What to Declare?
                </h3>
                
                <!-- Quick Answer Box -->
                <div style="background: #fff; border: 2px solid #4caf50; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                    <h4 style="color: #2e7d32; margin: 0 0 15px 0; font-size: 1.3rem;">
                        üéØ Quick Answer: Do I Need to Declare My Medication?
                    </h4>
                    <div style="display: grid; gap: 15px;">
                        <div style="padding: 15px; background: #f1f8e9; border-radius: 8px; border-left: 4px solid #4caf50;">
                            <strong style="color: #2e7d32;">YES, ALWAYS DECLARE if:</strong>
                            <ul style="margin: 10px 0 0 20px;">
                                <li>It's a psychotropic drug (Ritalin, Concerta, Xanax, etc.)</li>
                                <li>It's a narcotic painkiller (codeine, morphine, oxycodone)</li>
                                <li>You're unsure about its classification</li>
                                <li>You have more than personal use amounts</li>
                            </ul>
                        </div>
                        <div style="padding: 15px; background: #fff3e0; border-radius: 8px; border-left: 4px solid #ff9800;">
                            <strong style="color: #e65100;">NO DECLARATION NEEDED for:</strong>
                            <ul style="margin: 10px 0 0 20px;">
                                <li>Common OTC medications (Tylenol, Advil, antihistamines)</li>
                                <li>Most antibiotics</li>
                                <li>Birth control pills</li>
                                <li>Vitamins and supplements</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional Resources -->
            <div style="background: #f8f9fa; border-radius: 15px; padding: 25px; margin-top: 30px;">
                <h4 style="color: #2c3e50; margin: 0 0 15px 0;">üìö Additional Resources</h4>
                <ul style="margin: 0; line-height: 1.8;">
                    <li><a href="https://www.mhlw.go.jp/english/policy/health-medical/pharmaceuticals/01.html" target="_blank">Official MHLW Guidelines</a></li>
                    <li><a href="https://jp.usembassy.gov/services/importing-medication/" target="_blank">US Embassy Guide</a></li>
                    <li><a href="http://www.ncd.mhlw.go.jp/en/index.html" target="_blank">Narcotics Control Department</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Products database
        const products = [
            {
                name: "Melano CC Intensive Anti-Spot Essence",
                japanese: "„É°„É©„ÉéCC Ëñ¨Áî®„Åó„ÅøÈõÜ‰∏≠ÂØæÁ≠ñÁæéÂÆπÊ∂≤",
                category: "skincare",
                price: "¬•1,200-1,500",
                locations: "Major chains, Don Quijote",
                description: "Vitamin C serum famous for fading dark spots and acne scars. Contains pure vitamin C (ascorbic acid) and vitamin E.",
                usage: "Apply 4-5 drops after toner, before moisturizer. Use at night or with sunscreen during day.",
                keywords: ["melano", "vitamin c", "dark spots", "acne scars", "serum", "ÁæéÂÆπÊ∂≤"]
            },
            {
                name: "Hada Labo Gokujyun Premium Lotion",
                japanese: "ËÇå„É©„Éú Ê•µÊΩ§„Éó„É¨„Éü„Ç¢„É†",
                category: "skincare",
                price: "¬•1,500-2,000",
                locations: "Everywhere - drugstores, convenience stores",
                description: "Super hydrating toner with 5 types of hyaluronic acid. Gold bottle version is most popular.",
                usage: "Pat into skin after cleansing. Can layer multiple times for extra hydration.",
                keywords: ["hada labo", "hyaluronic", "toner", "lotion", "Ê•µÊΩ§", "hydrating"]
            },
            {
                name: "Sante FX Neo Eye Drops",
                japanese: "„Çµ„É≥„ÉÜFX „Éç„Ç™",
                category: "medicine",
                price: "¬•500-700",
                locations: "All pharmacies",
                description: "Cooling eye drops popular with gamers and office workers. Intense minty sensation.",
                usage: "1-2 drops per eye, up to 6 times daily. Very strong cooling effect!",
                keywords: ["eye drops", "sante", "cooling", "tired eyes", "ÁõÆËñ¨"]
            },
            {
                name: "Biore UV Aqua Rich Watery Essence",
                japanese: "„Éì„Ç™„É¨ UV „Ç¢„ÇØ„Ç¢„É™„ÉÉ„ÉÅ „Ç¶„Ç©„Éº„Çø„É™„Éº„Ç®„ÉÉ„Çª„É≥„Çπ",
                category: "skincare",
                price: "¬•800-1,000",
                locations: "Drugstores, supermarkets",
                description: "Lightweight SPF50+ PA++++ sunscreen. Feels like water, no white cast.",
                usage: "Apply generously 15 minutes before sun exposure. Reapply every 2 hours.",
                keywords: ["sunscreen", "biore", "spf", "uv", "Êó•ÁÑº„ÅëÊ≠¢„ÇÅ"]
            },
            {
                name: "Salonpas Pain Relief Patches",
                japanese: "„Çµ„É≠„É≥„Éë„Çπ",
                category: "medicine",
                price: "¬•800-1,200",
                locations: "All pharmacies, some convenience stores",
                description: "Adhesive patches for muscle and joint pain. Contains methyl salicylate and menthol.",
                usage: "Apply to clean, dry skin. Leave on for up to 8 hours. Max 4 patches per day.",
                keywords: ["pain relief", "patches", "salonpas", "muscle pain", "ÊπøÂ∏É"]
            },
            {
                name: "KATE Eyebrow Products",
                japanese: "„Ç±„Ç§„Éà „Ç¢„Ç§„Éñ„É≠„Ç¶",
                category: "beauty",
                price: "¬•1,000-1,500",
                locations: "Drugstores with cosmetics sections",
                description: "Japan's #1 eyebrow brand. 3D Eyebrow Color and Designing Eyebrow are bestsellers.",
                usage: "Use powder for natural look, pencil for definition. Set with mascara.",
                keywords: ["eyebrow", "kate", "makeup", "brow", "Áúâ"]
            },
            {
                name: "DHC Lip Cream",
                japanese: "DHC Ëñ¨Áî®„É™„ÉÉ„Éó„ÇØ„É™„Éº„É†",
                category: "skincare",
                price: "¬•700-800",
                locations: "Convenience stores, drugstores",
                description: "Moisturizing lip balm with olive oil and vitamin E. Cult favorite.",
                usage: "Apply as needed. Great under lipstick or overnight treatment.",
                keywords: ["lip balm", "dhc", "lip cream", "„É™„ÉÉ„Éó"]
            },
            {
                name: "Kracie Naive Shampoo",
                japanese: "„ÇØ„É©„Ç∑„Ç® „Éä„Ç§„Éº„Éñ",
                category: "hygiene",
                price: "¬•500-700",
                locations: "Supermarkets, drugstores",
                description: "Gentle shampoo with plant extracts. Peach and grape scents are popular.",
                usage: "Lather and rinse. Follow with matching conditioner.",
                keywords: ["shampoo", "naive", "hair", "„Ç∑„É£„É≥„Éó„Éº"]
            },
            {
                name: "Canmake Cream Cheek",
                japanese: "„Ç≠„É£„É≥„É°„Ç§„ÇØ „ÇØ„É™„Éº„É†„ÉÅ„Éº„ÇØ",
                category: "beauty",
                price: "¬•600-700",
                locations: "Drugstores, Don Quijote",
                description: "Affordable cream blush that blends seamlessly. Gives natural flushed look.",
                usage: "Tap onto cheeks with fingers and blend outward.",
                keywords: ["blush", "canmake", "cream cheek", "„ÉÅ„Éº„ÇØ", "makeup"]
            },
            {
                name: "Oronine H Ointment",
                japanese: "„Ç™„É≠„Éä„Ç§„É≥HËªüËÜè",
                category: "medicine",
                price: "¬•600-1,000",
                locations: "All pharmacies",
                description: "Antiseptic ointment for cuts, acne, dry skin. Japan's household staple since 1953.",
                usage: "Apply thin layer to affected area 2-3 times daily.",
                keywords: ["ointment", "oronine", "antiseptic", "cuts", "acne", "ËªüËÜè"]
            }
        ];

        // Drug equivalents database
        const drugEquivalents = [
            {
                westernName: "Tylenol",
                genericName: "Acetaminophen/Paracetamol",
                japaneseEquivalents: [
                    {name: "Eve („Ç§„Éñ)", description: "Various formulations with acetaminophen"},
                    {name: "Bufferin („Éê„Éï„Ç°„É™„É≥)", description: "Some versions contain acetaminophen"},
                    {name: "Norshin („Éé„Éº„Ç∑„É≥)", description: "Pure acetaminophen option available"}
                ],
                notes: "Acetaminophen is „Ç´„É≠„Éä„Éº„É´ (karonƒÅru) in Japanese. Available OTC.",
                importInfo: "Can bring up to 2 months supply without special permission."
            },
            {
                westernName: "Advil/Motrin",
                genericName: "Ibuprofen",
                japaneseEquivalents: [
                    {name: "Eve Quick („Ç§„Éñ„ÇØ„Ç§„ÉÉ„ÇØ)", description: "Fast-acting ibuprofen"},
                    {name: "Ringl („É™„É≥„Ç∞„É´)", description: "Pure ibuprofen tablets"},
                    {name: "Fedes („Éï„Çß„Éá„Çπ)", description: "Ibuprofen with stomach protection"}
                ],
                notes: "Ibuprofen („Ç§„Éñ„Éó„É≠„Éï„Çß„É≥) widely available. Max OTC dose is 150mg.",
                importInfo: "Can bring up to 2 months supply without special permission."
            },
            {
                westernName: "Benadryl",
                genericName: "Diphenhydramine",
                japaneseEquivalents: [
                    {name: "Restamin („É¨„Çπ„Çø„Éü„É≥)", description: "Same active ingredient"},
                    {name: "Drewell („Éâ„É™„Ç®„É´)", description: "Sleep aid version"}
                ],
                notes: "Often marketed as sleep aid in Japan rather than allergy medicine.",
                importInfo: "No restrictions on reasonable amounts."
            },
            {
                westernName: "Sudafed",
                genericName: "Pseudoephedrine",
                japaneseEquivalents: [
                    {name: "PROHIBITED", description: "Pseudoephedrine is banned in Japan"},
                    {name: "Alternative: Pabron („Éë„Éñ„É≠„É≥)", description: "Uses different decongestants"},
                    {name: "Alternative: Benza Block („Éô„É≥„Ç∂„Éñ„É≠„ÉÉ„ÇØ)", description: "Non-pseudoephedrine formula"}
                ],
                notes: "‚ö†Ô∏è Pseudoephedrine is ILLEGAL in Japan. Use phenylephrine alternatives.",
                importInfo: "PROHIBITED - Will be confiscated at customs. Bring alternatives."
            },
            {
                westernName: "Adderall",
                genericName: "Amphetamine",
                japaneseEquivalents: [
                    {name: "PROHIBITED", description: "Amphetamines are illegal in Japan"},
                    {name: "No equivalent", description: "Amphetamine-based drugs banned"}
                ],
                notes: "‚ö†Ô∏è ILLEGAL in Japan. Possession can lead to arrest and imprisonment.",
                importInfo: "ABSOLUTELY PROHIBITED - No exceptions. Consider Concerta/Strattera with permit."
            }
        ];

        // Symptom treatments database
        const symptomTreatments = [
            {
                symptom: "Headache",
                keywords: ["headache", "migraine", "head pain", "È†≠Áóõ"],
                treatments: [
                    {
                        name: "Eve A („Ç§„ÉñA)",
                        description: "Popular headache medicine with ibuprofen and caffeine",
                        dosage: "2 tablets up to 3 times daily",
                        price: "¬•800-1,200"
                    },
                    {
                        name: "Bufferin Premium („Éê„Éï„Ç°„É™„É≥„Éó„É¨„Éü„Ç¢„É†)",
                        description: "Fast-acting with stomach protection",
                        dosage: "2 tablets up to 3 times daily",
                        price: "¬•1,000-1,500"
                    }
                ]
            },
            {
                symptom: "Cold/Flu",
                keywords: ["cold", "flu", "cough", "fever", "È¢®ÈÇ™", "„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂"],
                treatments: [
                    {
                        name: "Pabron Gold A („Éë„Éñ„É≠„É≥„Ç¥„Éº„É´„ÉâA)",
                        description: "Comprehensive cold medicine - no pseudoephedrine",
                        dosage: "Follow package instructions",
                        price: "¬•1,500-2,000"
                    },
                    {
                        name: "Lulu Attack EX („É´„É´„Ç¢„Çø„ÉÉ„ÇØEX)",
                        description: "Strong formula for severe symptoms",
                        dosage: "3 tablets, 3 times daily",
                        price: "¬•1,200-1,800"
                    }
                ]
            },
            {
                symptom: "Stomach Pain/Indigestion",
                keywords: ["stomach", "indigestion", "nausea", "ËÉÉÁóõ", "Ê∂àÂåñ‰∏çËâØ"],
                treatments: [
                    {
                        name: "Ohta's Isan (Â§™Áî∞ËÉÉÊï£)",
                        description: "Traditional antacid powder, very effective",
                        dosage: "1 packet after meals",
                        price: "¬•800-1,200"
                    },
                    {
                        name: "Gaster 10 („Ç¨„Çπ„Çø„Éº10)",
                        description: "H2 blocker for acid reflux",
                        dosage: "1 tablet up to 2 times daily",
                        price: "¬•1,000-1,500"
                    }
                ]
            }
        ];

        // Import restrictions database
        const importRestrictions = [
            // PROHIBITED - Amphetamines
            {
                name: "Adderall",
                genericName: "amphetamine/dextroamphetamine",
                alternateNames: ["Adderall XR", "Mydayis"],
                status: "prohibited",
                category: "Amphetamine Stimulants",
                reason: "Contains amphetamine - classified as illegal stimulant in Japan",
                consequences: "Arrest and detention (18+ days documented cases)",
                alternatives: ["Vyvanse (with permit)", "Concerta (with permit)", "Strattera (available in Japan)"],
                permitRequired: "Prohibited - cannot obtain permit",
                searchTerms: ["adderall", "amphetamine", "dextroamphetamine", "adhd"]
            },
            {
                name: "Vyvanse",
                genericName: "lisdexamfetamine",
                alternateNames: ["Elvanse", "Tyvense"],
                status: "permit-required",
                category: "ADHD Medication",
                permitType: "Stimulants' Raw Materials",
                maxQuantity: "30 days supply",
                applicationTime: "Apply by: 4-6 weeks before travel",
                requiredDocs: ["Medical certificate", "Prescription", "Import application"],
                processingBureau: "Regional Health Bureau based on entry airport",
                permitRequired: "Import certificate required - apply 4-6 weeks before travel",
                searchTerms: ["vyvanse", "lisdexamfetamine", "adhd", "elvanse"]
            },
            {
                name: "Concerta",
                genericName: "methylphenidate",
                alternateNames: ["Ritalin LA", "Metadate CD"],
                status: "permit-required",
                category: "ADHD Medication",
                permitType: "Psychotropic Drug",
                maxQuantity: "30 days supply",
                applicationTime: "Apply by: 4-6 weeks before travel",
                requiredDocs: ["Medical certificate", "Prescription", "Import application"],
                processingBureau: "Regional Health Bureau",
                permitRequired: "Import certificate required - apply 4-6 weeks before travel",
                searchTerms: ["concerta", "methylphenidate", "ritalin", "adhd"]
            },
            {
                name: "Xanax",
                genericName: "alprazolam",
                alternateNames: ["Niravam"],
                status: "controlled-allowed",
                category: "Benzodiazepine",
                maxQuantity: "30 days supply (1.2g total)",
                conditions: "Must declare at customs (Red Channel), keep prescription",
                notes: "Highly controlled - expect scrutiny",
                permitRequired: "Not required for standard quantities (under 30 days supply)",
                searchTerms: ["xanax", "alprazolam", "anxiety", "benzodiazepine"]
            },
            {
                name: "EpiPen",
                genericName: "epinephrine auto-injector",
                alternateNames: ["Auvi-Q", "Jext", "Emerade", "epinephrine pen"],
                status: "controlled-allowed",
                category: "Emergency Medication",
                maxQuantity: "1 month supply (typically 4 units)",
                conditions: "Must declare at customs (Red Channel), keep in original packaging",
                notes: "Widely recognized by customs officers. Available in Japan for ¬•7,800-12,000",
                permitRequired: "Not required for standard quantities (under 1 month supply)",
                searchTerms: ["epipen", "epinephrine", "allergy", "anaphylaxis", "emergency", "auto-injector"]
            },
            {
                name: "Tylenol",
                genericName: "acetaminophen/paracetamol",
                alternateNames: ["Panadol", "Excedrin (without caffeine)"],
                status: "allowed",
                category: "Pain Relief",
                maxQuantity: "2 months supply",
                conditions: "Keep in original packaging",
                notes: "Widely available in Japan as 'Eve' or 'Bufferin'",
                permitRequired: "Not required",
                searchTerms: ["tylenol", "acetaminophen", "paracetamol", "pain", "fever"]
            },
            {
                name: "Birth Control Pills",
                genericName: "various oral contraceptives",
                alternateNames: ["The Pill", "Yaz", "Ortho Tri-Cyclen", "Yasmin", "Lo Loestrin", "Seasonique", "Marvelon", "Triquilar"],
                status: "allowed",
                category: "Contraceptives",
                maxQuantity: "1 month supply (21-28 pills) without permit, larger quantities with Yunyu Kakunin-sho",
                conditions: "Keep in original prescription bottle with pharmacy label",
                notes: "Monthly mail delivery option for long-term stays. Japanese options limited (¬•2,000-3,500/month, no insurance coverage). Mini-pills not available in Japan.",
                permitRequired: "Not required for 1 month supply. Yunyu Kakunin-sho required for larger quantities (apply 2-3 weeks advance)",
                searchTerms: ["birth control", "contraceptive", "pill", "yaz", "ortho", "yasmin", "oral contraceptive", "hormone", "estrogen", "progestin", "mini pill"]
            }
        ];

        // Tab switching functionality
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
                
                this.classList.add('active');
                
                const tabName = this.getAttribute('data-tab');
                document.getElementById(tabName + '-tab').classList.remove('hidden');
                
                if (tabName === 'regulations' && document.getElementById('restrictionsGrid')) {
                    displayAllCategories(document.getElementById('restrictionsGrid'));
                }
            });
        });

        // Category filter functionality
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                filterProducts(this.getAttribute('data-category'));
            });
        });

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function() {
            searchProducts(this.value);
        });

        // Product search and display functions
        function searchProducts(query) {
            const filtered = products.filter(product => {
                const searchText = query.toLowerCase();
                return product.name.toLowerCase().includes(searchText) ||
                       product.japanese.includes(searchText) ||
                       product.description.toLowerCase().includes(searchText) ||
                       product.keywords.some(keyword => keyword.includes(searchText));
            });
            
            displayProducts(filtered);
        }

        function filterProducts(category) {
            const filtered = category === 'all' ? products : products.filter(p => p.category === category);
            displayProducts(filtered);
        }

        function displayProducts(productsToShow) {
            const grid = document.getElementById('productsGrid');
            const noResults = document.getElementById('noResults');
            
            if (productsToShow.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            grid.innerHTML = productsToShow.map(product => `
                <div class="product-card">
                    <div class="product-header">
                        <div>
                            <h3 class="product-name">${product.name}</h3>
                            <p class="product-japanese">${product.japanese}</p>
                        </div>
                        <span class="product-category">${product.category}</span>
                    </div>
                    <p class="product-description">${product.description}</p>
                    <div class="product-details">
                        <div class="detail-item">
                            <div class="detail-label">Price Range</div>
                            <div class="detail-value">${product.price}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Where to Find</div>
                            <div class="detail-value">${product.locations}</div>
                        </div>
                    </div>
                    <div class="usage-tips">
                        <h4>How to Use</h4>
                        <p>${product.usage}</p>
                    </div>
                </div>
            `).join('');
        }

        // Equivalents search functionality
        function searchEquivalents() {
            const query = document.getElementById('equivalentSearch').value.toLowerCase();
            const grid = document.getElementById('equivalentsGrid');
            const noResults = document.getElementById('noEquivalents');
            
            if (!query) {
                grid.innerHTML = '';
                noResults.style.display = 'none';
                return;
            }
            
            const results = drugEquivalents.filter(drug => 
                drug.westernName.toLowerCase().includes(query) ||
                drug.genericName.toLowerCase().includes(query)
            );
            
            if (results.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            grid.innerHTML = results.map(drug => `
                <div class="product-card">
                    <div class="product-header">
                        <div>
                            <h3 class="product-name">${drug.westernName}</h3>
                            <p class="product-japanese">${drug.genericName}</p>
                        </div>
                    </div>
                    <div class="equivalent-info">
                        <h4>Japanese Equivalents:</h4>
                        <ul class="equivalent-list">
                            ${drug.japaneseEquivalents.map(eq => 
                                `<li><strong>${eq.name}</strong> - ${eq.description}</li>`
                            ).join('')}
                        </ul>
                    </div>
                    <div class="usage-tips">
                        <h4>Important Notes</h4>
                        <p>${drug.notes}</p>
                        <p style="margin-top: 10px;"><strong>Import Info:</strong> ${drug.importInfo}</p>
                    </div>
                </div>
            `).join('');
        }

        // Symptoms search functionality
        function searchSymptoms() {
            const query = document.getElementById('symptomSearch').value.toLowerCase();
            const grid = document.getElementById('symptomsGrid');
            const noResults = document.getElementById('noSymptoms');
            
            if (!query) {
                grid.innerHTML = '';
                noResults.style.display = 'none';
                return;
            }
            
            const results = symptomTreatments.filter(treatment =>
                treatment.keywords.some(keyword => keyword.includes(query))
            );
            
            if (results.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            grid.innerHTML = results.map(treatment => `
                <div class="product-card">
                    <h3 class="product-name">Treatments for ${treatment.symptom}</h3>
                    ${treatment.treatments.map(med => `
                        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <h4 style="color: #2c3e50; margin-bottom: 10px;">${med.name}</h4>
                            <p style="margin-bottom: 10px;">${med.description}</p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div>
                                    <strong>Dosage:</strong> ${med.dosage}
                                </div>
                                <div>
                                    <strong>Price:</strong> ${med.price}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }

        // Search function for import restrictions
        function searchImportRestrictions() {
            const searchTerm = document.getElementById('restrictionSearch').value.toLowerCase().trim();
            const resultsGrid = document.getElementById('restrictionsGrid');
            const noResults = document.getElementById('noRestrictions');
            
            if (!searchTerm) {
                displayAllCategories(resultsGrid);
                noResults.style.display = 'none';
                return;
            }
            
            const results = importRestrictions.filter(med => {
                return med.searchTerms.some(term => term.includes(searchTerm)) ||
                       med.name.toLowerCase().includes(searchTerm) ||
                       med.genericName.toLowerCase().includes(searchTerm) ||
                       med.alternateNames.some(alt => alt.toLowerCase().includes(searchTerm));
            });
            
            if (results.length === 0) {
                resultsGrid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            displayRestrictionResults(results, resultsGrid);
        }

        // Enhanced display function implementing "Handy Guide on Top, Encyclopedia Underneath"
        function displayRestrictionResults(results, container) {
            container.innerHTML = results.map(med => {
                // Determine status styling
                let statusIcon, statusClass;
                switch(med.status) {
                    case 'prohibited':
                        statusIcon = '‚ùå';
                        statusClass = 'prohibited';
                        break;
                    case 'permit-required':
                        statusIcon = '‚ö†Ô∏è';
                        statusClass = 'permit-required';
                        break;
                    case 'controlled-allowed':
                        statusIcon = 'üî∂';
                        statusClass = 'controlled-allowed';
                        break;
                    case 'allowed':
                        statusIcon = '‚úÖ';
                        statusClass = 'allowed';
                        break;
                    default:
                        statusIcon = '‚ùì';
                        statusClass = 'unknown';
                }

                const cardId = `med-${med.name.replace(/\s+/g, '-').toLowerCase()}`;

                return `
                    <div class="medication-card status-${med.status}">
                        <!-- HANDY GUIDE LAYER - TOP -->
                        <div class="handy-guide">
                            <div class="guide-header">
                                <div class="medication-title">
                                    <h2 class="medication-name">${med.name}</h2>
                                    <div class="medication-generic">${med.genericName}</div>
                                    ${med.usedFor ? `<div class="medication-used-for">Used for: ${med.usedFor}</div>` : ''}
                                </div>
                                <div class="status-badge ${statusClass}">
                                    ${statusIcon} ${med.status.replace('-', ' ').toUpperCase()}
                                </div>
                            </div>

                            <!-- Critical Action Box -->
                            <div class="critical-action">
                                <div class="action-title">
                                    üéØ What You Need to Do
                                </div>
                                <div class="action-steps">
                                    ${generateCriticalAction(med)}
                                </div>
                            </div>

                            <!-- Quick Facts Grid -->
                            <div class="quick-facts">
                                ${generateQuickFacts(med)}
                            </div>

                            <!-- Critical Warnings -->
                            ${med.criticalWarnings && med.criticalWarnings.length > 0 ? `
                                <div class="critical-warning">
                                    <div class="warning-title">
                                        üö® Critical Warning
                                    </div>
                                    <div class="warning-text">
                                        ${med.criticalWarnings[0]}
                                    </div>
                                </div>
                            ` : ''}

                            <!-- Toggle to Encyclopedia -->
                            <button class="encyclopedia-toggle" onclick="toggleEncyclopedia('${cardId}')">
                                üìö View Complete Details & Expert Commentary
                            </button>
                        </div>

                        <!-- ENCYCLOPEDIA LAYER - UNDERNEATH -->
                        <div class="encyclopedia" id="${cardId}-encyclopedia">
                            <div class="encyclopedia-header">
                                üìö Complete ${med.name} Import Guide
                            </div>

                            <!-- Complete Information Chart -->
                            <div class="info-chart">
                                ${generateCompleteChart(med)}
                            </div>

                            <button class="encyclopedia-toggle" onclick="toggleEncyclopedia('${cardId}')" style="margin-top: 20px;">
                                ‚Üë Hide Complete Details
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Generate critical action based on status
        function generateCriticalAction(med) {
            switch(med.status) {
                case 'prohibited':
                    return `
                        <div class="step-item">
                            <div class="step-number">‚ùå</div>
                            <div class="step-content">
                                <strong>DO NOT BRING:</strong> This medication is illegal in Japan. 
                                ${med.alternatives && med.alternatives.length > 0 ? 
                                    `Consider alternatives: ${med.alternatives[0]}` : 
                                    'Consult your doctor about legal alternatives before travel.'
                                }
                            </div>
                        </div>
                    `;
                
                case 'permit-required':
                    return `
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <div class="step-content">Apply for import permit ${med.applicationTimeline || med.applicationTime || '4-6 weeks before travel'}</div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">2</div>
                            <div class="step-content">At airport: Red Channel, present permit + prescription</div>
                        </div>
                    `;
                
                case 'controlled-allowed':
                    return `
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <div class="step-content">Pack in original containers with prescription</div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">2</div>
                            <div class="step-content">At airport: ${med.customsDeclaration === 'YES' ? 'Red Channel - declare at customs' : 'Green Channel - no declaration needed'}</div>
                        </div>
                    `;
                
                default:
                    return `
                        <div class="step-item">
                            <div class="step-number">‚úì</div>
                            <div class="step-content">
                                Keep in original packaging with prescription. 
                                ${med.customsDeclaration === 'YES' ? 'Declare at customs if asked.' : 'No special procedures required.'}
                            </div>
                        </div>
                    `;
            }
        }

        // Generate quick facts grid
        function generateQuickFacts(med) {
            let facts = [];
            
            if (med.maxQuantity) {
                facts.push(`
                    <div class="fact-item">
                        <div class="fact-label">Max Quantity</div>
                        <div class="fact-value">${med.maxQuantity}</div>
                    </div>
                `);
            }
            
            if (med.customsDeclaration) {
                facts.push(`
                    <div class="fact-item">
                        <div class="fact-label">Customs Declaration</div>
                        <div class="fact-value">${med.customsDeclaration}</div>
                    </div>
                `);
            }
            
            if (med.channelRequired) {
                facts.push(`
                    <div class="fact-item">
                        <div class="fact-label">Airport Channel</div>
                        <div class="fact-value">${med.channelRequired}</div>
                    </div>
                `);
            }
            
            return facts.join('');
        }

        // Generate complete chart
        function generateCompleteChart(med) {
            return `
                <div class="chart-section">
                    <h4>üìã Import Requirements</h4>
                    <div class="chart-grid">
                        ${med.maxQuantity ? `
                            <div class="chart-item">
                                <div class="chart-label">Max Quantity</div>
                                <div class="chart-value">${med.maxQuantity}</div>
                            </div>
                        ` : ''}
                        ${med.permitRequired ? `
                            <div class="chart-item">
                                <div class="chart-label">Import Permit</div>
                                <div class="chart-value">${med.permitRequired}</div>
                            </div>
                        ` : ''}
                        ${med.consequences ? `
                            <div class="chart-item">
                                <div class="chart-label">Consequences</div>
                                <div class="chart-value">${med.consequences}</div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Toggle encyclopedia section
        function toggleEncyclopedia(cardId) {
            const encyclopedia = document.getElementById(`${cardId}-encyclopedia`);
            const button = event.target;
            
            if (encyclopedia.classList.contains('expanded')) {
                encyclopedia.classList.remove('expanded');
                button.textContent = 'üìö View Complete Details & Expert Commentary';
            } else {
                encyclopedia.classList.add('expanded');
                button.textContent = '‚Üë Hide Complete Details';
                
                encyclopedia.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }
        
        // Display all categories when no search term
        function displayAllCategories(container) {
            const categories = {
                prohibited: importRestrictions.filter(m => m.status === 'prohibited'),
                permitRequired: importRestrictions.filter(m => m.status === 'permit-required'),
                allowed: importRestrictions.filter(m => m.status === 'allowed' || m.status === 'controlled-allowed')
            };
            
            container.innerHTML = `
                <div style="background: #f8d7da; border: 2px solid #dc3545; border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <h3 style="color: #dc3545;">‚ùå Prohibited Medications (${categories.prohibited.length})</h3>
                    <p style="color: #721c24;">Cannot enter Japan under any circumstances</p>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                        ${categories.prohibited.map(m => `
                            <button onclick="searchSpecificMed('${m.name}')" 
                                    style="background: white; border: 1px solid #dc3545; color: #dc3545; 
                                           padding: 8px 15px; border-radius: 20px; cursor: pointer;
                                           transition: all 0.3s;">
                                ${m.name}
                            </button>
                        `).join('')}
                    </div>
                </div>
                
                <div style="background: #fff3cd; border: 2px solid #856404; border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <h3 style="color: #856404;">‚ö†Ô∏è Permit Required (${categories.permitRequired.length})</h3>
                    <p style="color: #856404;">Allowed with advance permission (4-6 weeks recommended)</p>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                        ${categories.permitRequired.map(m => `
                            <button onclick="searchSpecificMed('${m.name}')" 
                                    style="background: white; border: 1px solid #856404; color: #856404; 
                                           padding: 8px 15px; border-radius: 20px; cursor: pointer;
                                           transition: all 0.3s;">
                                ${m.name}
                            </button>
                        `).join('')}
                    </div>
                </div>
                
                <div style="background: #d4edda; border: 2px solid #155724; border-radius: 15px; padding: 20px;">
                    <h3 style="color: #155724;">‚úÖ Allowed Medications (${categories.allowed.length})</h3>
                    <p style="color: #155724;">Can bring with conditions (typically 1-2 month supply)</p>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                        ${categories.allowed.map(m => `
                            <button onclick="searchSpecificMed('${m.name}')" 
                                    style="background: white; border: 1px solid #155724; color: #155724; 
                                           padding: 8px 15px; border-radius: 20px; cursor: pointer;
                                           transition: all 0.3s;">
                                ${m.name}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Search for specific medication
        function searchSpecificMed(medName) {
            document.getElementById('restrictionSearch').value = medName;
            searchImportRestrictions();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            displayProducts(products);
            
            if (document.getElementById('restrictionsGrid')) {
                displayAllCategories(document.getElementById('restrictionsGrid'));
            }
        });
    </script>
</body>
</html>
